---
title: Java项目设计
date: 2020-08-29 20:15:00
tags: 
	- Java
	- 后台开发
categories:
	- 项目
typora-root-url: ..
---

记录常问的项目设计思路。

<!--more-->

# 秒杀系统

## 关键问题

- 高并发：时间极短，瞬间用户量大。
- 超卖：实际下单数量超出了限购的数量。
- 恶意请求：
- 链接暴露：
- 数据库：

## 关键技术

![preview](/images/Java%E9%A1%B9%E7%9B%AE%E8%AE%BE%E8%AE%A1/v2-8aade443815c569af8599b0683e04b69_r.jpg)

- 服务单一职责：单独建立秒杀数据库。
- 秒杀链接加盐：url动态化，通过MD5等加密算法加密随机的字符串做url。
- Redis集群：主从同步、读写分离、哨兵。
- Nginx：负载均衡。
- 资源静态化
- 限流
  - 前端限流：点击一次后置灰一定时间防止连续点击。
  - 后端限流：只有秒杀成功的用户进行后续订单生成和支付等操作。
- 库存预热：提前把商品的库存加载到Redis中，让整个流程都在Redis中进行，秒杀结束后再写回数据库。分布式锁。
- 限流、降级、熔断、隔离：
- 削峰填谷：消息队列。